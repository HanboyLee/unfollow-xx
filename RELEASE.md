# 发布指南

本文档说明如何发布新版本的 X Unfollower Chrome 扩展。

## 🚀 快速发布

### 1. 补丁版本 (Bug 修复)

```bash
npm run release:patch
# 1.0.0 -> 1.0.1
```

### 2. 次要版本 (新功能)

```bash
npm run release:minor
# 1.0.0 -> 1.1.0
```

### 3. 主要版本 (破坏性变更)

```bash
npm run release:major
# 1.0.0 -> 2.0.0
```

### 4. 交互式选择

```bash
npm run release
# 按提示选择版本类型
```

## 📋 发布流程

执行发布命令后，脚本会自动完成以下步骤：

```
┌─────────────────────────────────────────────────────────┐
│ 1. 检查工作目录是否干净                                  │
├─────────────────────────────────────────────────────────┤
│ 2. 显示版本变更                                          │
├─────────────────────────────────────────────────────────┤
│ 3. 更新 package.json 版本号                              │
├─────────────────────────────────────────────────────────┤
│ 4. 更新 manifest.json 版本号                             │
├─────────────────────────────────────────────────────────┤
│ 5. 创建 Git commit                                       │
├─────────────────────────────────────────────────────────┤
│ 6. 创建 Git tag (v1.0.0)                                │
├─────────────────────────────────────────────────────────┤
│ 7. 推送到 GitHub                                         │
├─────────────────────────────────────────────────────────┤
│ 8. GitHub Actions 自动构建并创建 Release                  │
└─────────────────────────────────────────────────────────┘
```

## 🔍 发布后验证

1. **检查 GitHub Actions**:
   ```
   https://github.com/HanboyLee/unfollow-xx/actions
   ```

2. **下载 Release**:
   ```
   https://github.com/HanboyLee/unfollow-xx/releases
   ```

3. **本地测试**:
   - 下载 zip 文件
   - 解压后加载到 Chrome 测试

## 📝 版本号规范

遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范：

| 版本类型 | 格式 | 说明 | 示例 |
|:---------|:-----|:-----|:-----|
| **Major** | X.0.0 | 破坏性变更/API 修改 | 1.0.0 → 2.0.0 |
| **Minor** | 0.X.0 | 新功能，向后兼容 | 1.0.0 → 1.1.0 |
| **Patch** | 0.0.X | Bug 修复，向后兼容 | 1.0.0 → 1.0.1 |

## ⚠️ 注意事项

1. **发布前确保**:
   - 所有更改已提交
   - 代码已通过本地测试
   - 更新了 CHANGELOG（如果有）

2. **工作目录必须干净**:
   ```bash
   # 检查未提交的更改
   git status
   ```

3. **Tag 推送后无法修改**:
   - 请确认版本号正确后再推送
   - 如需撤销，需删除远程 tag 并重新发布

## 🔄 回滚版本

如果发现问题需要回滚：

```bash
# 1. 删除本地 tag
git tag -d v1.0.0

# 2. 删除远程 tag
git push origin :refs/tags/v1.0.0

# 3. 回退 commit
git reset --hard HEAD~1

# 4. 强制推送（谨慎使用）
git push origin main --force
```

## 📦 GitHub Release 内容

每个 Release 自动包含：

- 版本号 (如 v1.0.0)
- 构建好的扩展 zip 文件
- 自动生成的安装说明
- Git commit 历史（Changelog）
